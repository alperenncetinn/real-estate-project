# Docker Compose for local testing
version: '3.8'

services:
  api:
    build:
      context: .
      dockerfile: Dockerfile.api
    ports:
      - "5180:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - ConnectionStrings__DefaultConnection=${DATABASE_URL}
      - JwtSettings__SecretKey=${JWT_SECRET_KEY}
      - JwtSettings__Issuer=RealEstateApi
      - JwtSettings__Audience=RealEstateApp
      - JwtSettings__ExpirationMinutes=480
      - AdminSettings__DefaultAdminEmail=${ADMIN_EMAIL}
      - AdminSettings__DefaultAdminPassword=${ADMIN_PASSWORD}
      - Email__SmtpHost=smtp.gmail.com
      - Email__SmtpPort=587
      - Email__SenderEmail=${EMAIL_SENDER}
      - Email__SenderPassword=${EMAIL_PASSWORD}
      - Email__SenderName=Senin Evin

  web:
    build:
      context: .
      dockerfile: Dockerfile.web
    ports:
      - "5173:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - ApiSettings__BaseUrl=${API_URL}
    depends_on:
      - api
